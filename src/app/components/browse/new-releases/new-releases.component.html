<div class="space-y-4 md:space-y-8 animate-fade-in pb-20 md:pb-24">
    <!-- SEO-optimized header -->
    <header class="mb-4 md:mb-8 flex flex-col md:flex-row justify-between items-start md:items-end gap-3 md:gap-4">
        <div>
            <span
                class="text-emerald-400 text-xs md:text-sm font-bold uppercase tracking-wider mb-1 md:mb-2 block">Descubre</span>
            <h1 class="text-2xl md:text-4xl lg:text-5xl font-black text-white mb-1 md:mb-2">
                Nuevos Lanzamientos
            </h1>
            <p class="text-zinc-400 text-sm md:text-lg">
                Lo más fresco de la escena musical global.
                <span class="text-zinc-500 text-xs md:text-sm ml-1">(Previews de 30s)</span>
            </p>
        </div>
        <button *ngIf="releases().length > 0" (click)="playAll()"
            class="bg-emerald-500 hover:bg-emerald-400 text-black px-4 py-2 md:px-8 md:py-3 rounded-full font-bold flex items-center gap-1.5 md:gap-2 transition-all hover:scale-105 shadow-lg shadow-emerald-500/20 text-sm md:text-base">
            <i class='bx bx-play text-xl md:text-2xl'></i>
            <span>Reproducir Todo</span>
        </button>
    </header>

    <!-- Skeleton Loading -->
    <div *ngIf="loading()" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-3 md:gap-6">
        @for (i of [1,2,3,4,5,6,7,8,9,10]; track i) {
        <app-skeleton type="card"></app-skeleton>
        }
    </div>

    <!-- <app-ad-banner adType="Banner Promocional" class="mb-4 md:mb-8 block" aria-label="Publicidad"></app-ad-banner> -->

    <!-- Grid of New Songs - Compact on mobile -->
    <section *ngIf="!loading()" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-3 md:gap-6"
        aria-label="Nuevos lanzamientos musicales">
        <article *ngFor="let release of releases(); let i = index" (click)="playSong(release, i)"
            [class.ring-2]="isCurrentSong(release)" [class.ring-emerald-500]="isCurrentSong(release)"
            class="group cursor-pointer p-2 md:p-4 rounded-lg md:rounded-2xl bg-zinc-900/40 hover:bg-zinc-800/60 transition-all hover:-translate-y-1 border border-transparent hover:border-zinc-700"
            [attr.aria-label]="'Reproducir ' + release.title + ' de ' + release.artist">
            <div
                class="relative aspect-square rounded-lg md:rounded-xl overflow-hidden bg-zinc-800 mb-2 md:mb-4 shadow-lg group-hover:shadow-xl transition-shadow">
                <img [src]="release.img" [alt]="'Portada de ' + release.album + ' por ' + release.artist"
                    (error)="handleImageError($event, release.title)" loading="lazy"
                    class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105">

                <!-- Play overlay -->
                <div
                    class="absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center backdrop-blur-sm">
                    <button
                        class="w-10 h-10 md:w-14 md:h-14 rounded-full bg-emerald-500 text-black flex items-center justify-center transform scale-50 group-hover:scale-100 transition-all duration-300 shadow-xl"
                        aria-label="Reproducir">
                        <i [class]="isCurrentSong(release) && isPlaying() ? 'bx bx-pause' : 'bx bx-play'"
                            class="text-xl md:text-3xl ml-0.5"></i>
                    </button>
                </div>

                <!-- Now playing indicator -->
                <div *ngIf="isCurrentSong(release)"
                    class="absolute top-2 right-2 bg-emerald-500 text-black px-2 py-0.5 rounded-full text-[10px] md:text-xs font-bold flex items-center gap-1">
                    <i class='bx bx-music animate-pulse'></i>
                    <span class="hidden md:inline">Reproduciendo</span>
                </div>
            </div>

            <h2 class="font-bold text-white truncate group-hover:text-emerald-400 transition-colors text-xs md:text-lg">
                {{release.title}}
            </h2>
            <p class="text-[10px] md:text-sm text-zinc-400 truncate font-medium">
                {{release.artist}}
            </p>

            <div class="flex items-center justify-between mt-1 md:mt-2">
                <span
                    class="text-[10px] md:text-xs text-emerald-500/80 bg-emerald-500/10 px-1.5 py-0.5 md:px-2 rounded-full font-bold">
                    {{release.genre}}
                </span>
                <span class="text-[10px] md:text-xs text-zinc-500">{{release.duration}}</span>
            </div>
        </article>
    </section>

    <!-- Empty state -->
    <div *ngIf="!loading() && releases().length === 0" class="text-center py-12 md:py-16">
        <i class='bx bx-music text-5xl md:text-6xl text-zinc-700 mb-4'></i>
        <h3 class="text-lg md:text-xl font-bold text-zinc-400 mb-2">No hay lanzamientos disponibles</h3>
        <p class="text-sm md:text-base text-zinc-500">Vuelve pronto para descubrir nueva música</p>
    </div>
</div>